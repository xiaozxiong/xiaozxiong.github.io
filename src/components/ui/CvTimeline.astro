---
import { isExperience } from '@/types/cv';
import type { Experience, Education } from '@/types/cv';

interface Props {
	elements: (Experience | Education)[]
	colored: boolean
}

const { elements, colored } = Astro.props
---

<!-- layout -->

<ul class="space-y-10 relative pl-8">
  {elements.map((element) => {
    const isExp = isExperience(element);
    // Different colors for Experience and Education
    const colorDot = "bg-[#0d1321]";
    const colorLine = "bg-[#0d1321]";

    return (
      <li class="flex relative">
        {/* Left timeline: dot and vertical line */}
        <div class="flex flex-col items-center mr-4">
          {/* Timeline dot */}
          <span class={`w-5 h-5 rounded-full block mt-1 ${colorDot}`}></span>
          {/* Timeline vertical line */}
          <span class={`w-[3px] flex-1 block mt-1 ${colorLine}`}></span>
        </div>

        {/* Right side content */}
        <div class="flex-1">
          {/* Time period */}
          <time class="font-mono italic text-base text-gray-500">{element.time}</time>
          
          {/* Title/Degree and Company/Institution in the same line */}
          <div class="flex items-center gap-4 mt-1 text-lg">
            <span class="font-bold text-base">{isExp ? element.title : element.degree}</span>
            <span class="text-base">{isExp ? '' : element.major}</span>
            <span class="text-base">{isExp ? element.company : element.institution}</span>
          </div>

          {/* Description */}
          {element.description && <p class="mt-2 text-base text-gray-700">{element.description}</p>}
        
          {/* Optional location */}
          {element.location && <div class="text-gray-500 text-base">{element.location}</div>}
        </div>
      </li>
    );
  })}
</ul>